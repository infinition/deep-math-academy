<!-- Le Protocole BB84 -->
<div class="grid md:grid-cols-2 gap-8">
    <div class="bg-white p-6 rounded-xl shadow-sm border border-gray-200">
        <h3 class="text-xl font-bold text-indigo-700 mb-4">Le Protocole BB84 (1984)</h3>
        <ol class="list-decimal list-inside text-gray-700 space-y-3 text-sm">
            <li><strong>Alice</strong> envoie des photons polarisÃ©s alÃ©atoirement dans deux bases (+ ou x).</li>
            <li><strong>Bob</strong> mesure chaque photon dans une base alÃ©atoire (+ ou x).</li>
            <li><strong>Sifting :</strong> Alice et Bob s'appellent et comparent <em>seulement</em> leurs bases.
            </li>
            <li>Ils gardent les bits oÃ¹ les bases concordent (environ 50%).</li>
            <li>C'est leur <strong>ClÃ© Brute</strong>.</li>
        </ol>
    </div>

    <div class="bg-red-50 p-6 rounded-xl border border-red-200">
        <h3 class="text-xl font-bold text-red-800 mb-4">L'Espionne (Eve)</h3>
        <p class="text-gray-700 text-sm mb-4">
            Si Eve intercepte le photon pour le lire, elle doit le mesurer.
            Mais elle ne connaÃ®t pas la base ! Elle a 50% de chance de se tromper et de <strong>dÃ©truire
                l'Ã©tat</strong>.
        </p>
        <div class="bg-white p-3 rounded border border-red-100 text-xs text-red-600 font-mono">
            Erreur introduite par Eve â‰ˆ 25%
        </div>
        <p class="text-gray-700 text-sm mt-4">
            Alice et Bob sacrifient une partie de leur clÃ© pour vÃ©rifier le taux d'erreur. S'il est > 0, Eve est lÃ 
            ! Ils jettent tout.
        </p>
    </div>
</div>

<!-- Interactive Viz -->
<div class="bg-gray-900 p-6 rounded-xl shadow-inner text-center">
    <h3 class="text-white font-bold mb-4">Simulation : BB84 avec Eve</h3>

    <div class="relative w-full h-64 bg-gray-800 rounded-lg overflow-hidden mb-4">
        <!-- Background Grid -->
        <div class="absolute inset-0 opacity-10"
            style="background-image: radial-gradient(#fff 1px, transparent 1px); background-size: 20px 20px;"></div>

        <!-- Actors -->
        <div class="absolute left-4 top-1/2 -translate-y-1/2 flex flex-col items-center">
            <div class="text-yellow-400 font-bold mb-2">Alice</div>
            <div class="w-12 h-12 bg-yellow-600 rounded-full flex items-center justify-center text-2xl">ğŸ‘©</div>
        </div>

        <div class="absolute right-4 top-1/2 -translate-y-1/2 flex flex-col items-center">
            <div class="text-blue-400 font-bold mb-2">Bob</div>
            <div class="w-12 h-12 bg-blue-600 rounded-full flex items-center justify-center text-2xl">ğŸ‘¨</div>
        </div>

        <div id="eve-container"
            class="absolute left-1/2 top-1/2 -translate-x-1/2 -translate-y-1/2 flex flex-col items-center transition-opacity duration-500 opacity-0">
            <div class="text-red-500 font-bold mb-2">Eve</div>
            <div
                class="w-12 h-12 bg-red-600 rounded-full flex items-center justify-center text-2xl shadow-[0_0_20px_rgba(220,38,38,0.8)]">
                ğŸ•µï¸â€â™€ï¸</div>
        </div>

        <!-- Canvas for Photons -->
        <canvas id="qkd-viz" class="absolute inset-0 pointer-events-none"></canvas>
    </div>

    <div class="flex justify-center gap-4">
        <button onclick="window.sendQubit()"
            class="px-6 py-2 bg-indigo-600 hover:bg-indigo-500 text-white rounded-lg font-bold shadow-lg transition-all active:scale-95">
            Envoyer un Photon ğŸ”«
        </button>
        <button onclick="window.toggleEve()" id="eve-toggle-btn"
            class="px-6 py-2 bg-gray-700 hover:bg-red-900 text-gray-300 hover:text-white rounded-lg font-bold shadow-lg transition-all border border-gray-600">
            Activer Eve ğŸ•µï¸â€â™€ï¸
        </button>
    </div>

    <div id="qkd-log"
        class="mt-4 h-20 bg-black rounded p-2 font-mono text-xs text-left overflow-y-auto text-green-400 border border-gray-700">
        > PrÃªt pour la transmission...
    </div>
</div>
</div>