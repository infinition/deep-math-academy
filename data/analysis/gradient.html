<div class="space-y-8 fade-in max-w-6xl mx-auto">

    <!-- Header -->
    <div
        class="bg-gradient-to-r from-emerald-600 to-teal-600 p-8 rounded-2xl shadow-xl text-white relative overflow-hidden">
        <div class="relative z-10">
            <h2 class="text-3xl font-bold mb-4">L'Optimisation : Descendre la Montagne</h2>
            <p class="text-lg text-emerald-100 leading-relaxed">
                Imaginez que vous Ãªtes perdu en montagne dans un brouillard Ã©pais. <br>
                Pour redescendre au village (le point le plus bas), vous ne voyez pas la vallÃ©e entiÃ¨re. <br>
                Vous ne pouvez que tÃ¢ter le sol autour de vous et faire un pas dans la direction qui descend le plus
                fort.
            </p>
            <div
                class="mt-4 inline-block bg-white/20 backdrop-blur px-4 py-2 rounded-lg border border-white/30 font-mono text-sm">
                $\theta_{new} = \theta_{old} - \eta \cdot \nabla J(\theta)$
            </div>
        </div>
        <div class="absolute top-0 right-0 -mt-10 -mr-10 w-64 h-64 bg-white opacity-10 rounded-full blur-3xl"></div>
    </div>

    <!-- Interactive Simulator -->
    <div class="grid lg:grid-cols-3 gap-8">

        <!-- Canvas Area -->
        <div class="lg:col-span-2 bg-white rounded-2xl shadow-lg border border-gray-200 overflow-hidden flex flex-col">
            <div class="p-4 border-b border-gray-100 bg-gray-50 flex justify-between items-center">
                <h3 class="font-bold text-gray-800 flex items-center gap-2">
                    <span>ğŸ”ï¸ Simulateur de Descente de Gradient</span>
                </h3>
                <div
                    class="bg-emerald-100 text-emerald-700 px-3 py-1 rounded-full text-xs font-bold uppercase tracking-wide">
                    Interactif
                </div>
            </div>

            <div class="relative flex-1 bg-gray-900 cursor-crosshair group min-h-[300px]" id="gradCanvasContainer">
                <canvas id="gradientCanvas" width="600" height="350" class="w-full h-full block"></canvas>

                <!-- Overlay Stats -->
                <div
                    class="absolute top-4 right-4 bg-black/70 backdrop-blur text-white p-3 rounded border border-gray-700 text-xs font-mono space-y-1">
                    <div class="flex justify-between gap-4"><span>Position (x):</span> <span id="gradXVal"
                            class="text-emerald-400">0.00</span></div>
                    <div class="flex justify-between gap-4"><span>Pente (grad):</span> <span id="gradSlopeVal"
                            class="text-yellow-400">0.00</span></div>
                    <div class="flex justify-between gap-4"><span>CoÃ»t (Loss):</span> <span id="gradLossVal"
                            class="text-red-400">0.00</span></div>
                </div>
            </div>

            <!-- Controls -->
            <div class="p-6 bg-white border-t border-gray-100 space-y-6">

                <!-- Learning Rate Slider -->
                <div>
                    <div class="flex justify-between mb-2">
                        <label class="font-bold text-gray-700 text-sm">Learning Rate ($\eta$) : La taille du pas</label>
                        <span id="lrDisplay"
                            class="bg-indigo-100 text-indigo-800 px-2 py-0.5 rounded text-xs font-mono font-bold">0.1</span>
                    </div>
                    <input type="range" id="lrSlider" min="0.01" max="1.2" step="0.01" value="0.1"
                        class="w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer accent-indigo-600">
                    <div class="flex justify-between text-[10px] text-gray-400 mt-1">
                        <span>Prudent (Lent)</span>
                        <span>Optimal</span>
                        <span>Instable (Explose)</span>
                    </div>
                </div>

                <!-- Action Buttons -->
                <div class="flex gap-3">
                    <button onclick="stepGradient()"
                        class="flex-1 bg-emerald-600 hover:bg-emerald-700 text-white font-bold py-2 px-4 rounded-lg shadow transition flex items-center justify-center gap-2">
                        <span>ğŸ‘Ÿ</span> Faire un pas
                    </button>
                    <button id="btnAutoGrad" onclick="toggleAutoGradient()"
                        class="flex-1 bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-2 px-4 rounded-lg shadow transition flex items-center justify-center gap-2">
                        <span>â–¶ï¸</span> Auto
                    </button>
                    <button onclick="resetGradient()"
                        class="px-4 py-2 border border-gray-300 text-gray-600 font-bold rounded-lg hover:bg-gray-50 transition">
                        ğŸ”„ Reset
                    </button>
                </div>
            </div>
        </div>

        <!-- Explanations Column -->
        <div class="space-y-4">

            <div class="bg-white p-5 rounded-xl shadow-sm border-l-4 border-indigo-500">
                <h4 class="font-bold text-gray-800 mb-2">Le Gradient ($\nabla$)</h4>
                <p class="text-sm text-gray-600 mb-3">
                    C'est simplement la <strong>pente</strong>. <br>
                    Si la pente est positive (montÃ©e), on va Ã  gauche (on soustrait). <br>
                    Si la pente est nÃ©gative (descente), on va Ã  droite (on ajoute).
                </p>
                <div class="bg-indigo-50 p-2 rounded text-xs font-mono text-indigo-800">
                    Direction = - Gradient
                </div>
            </div>

            <div class="bg-white p-5 rounded-xl shadow-sm border-l-4 border-amber-500">
                <h4 class="font-bold text-gray-800 mb-2">Le Learning Rate ($\eta$)</h4>
                <p class="text-sm text-gray-600 mb-3">
                    C'est le paramÃ¨tre le plus important en Deep Learning.
                </p>
                <ul class="text-xs space-y-2 text-gray-500">
                    <li class="flex gap-2">
                        <span>ğŸ¢</span> <span><strong>Trop petit :</strong> L'IA met des annÃ©es Ã  apprendre.</span>
                    </li>
                    <li class="flex gap-2">
                        <span>ğŸ‡</span> <span><strong>Trop grand :</strong> L'IA saute par-dessus le minimum et diverge
                            (essayez LR > 1.0 !).</span>
                    </li>
                </ul>
            </div>

            <div class="bg-gray-50 p-4 rounded-xl border border-gray-200 text-xs text-gray-500">
                <strong>Note :</strong> En rÃ©alitÃ©, on est en dimension 1 milliard. Le "paysage" est inimaginable, mais
                le principe reste le mÃªme : suivre la pente descendante.
            </div>

        </div>
    </div>
</div>